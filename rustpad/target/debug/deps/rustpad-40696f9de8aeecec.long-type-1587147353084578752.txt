fn(WebSocket, Arc<std::sync::Mutex<HashMap<std::string::String, UnboundedSender<warp::ws::Message>>>>, tokio::sync::broadcast::Sender<DocumentUpdate>, Arc<std::sync::Mutex<HashMap<std::string::String, std::string::String>>>) -> impl warp::Future<Output = Result<impl Reply, Rejection>> {handle_websocket}
